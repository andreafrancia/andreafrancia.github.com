<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title></title>

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />

        <link rel="openid.server" href="http://www.blogger.com/openid-server.g" />
        <link rel="openid.delegate" href="http://andreafrancia.blogspot.com/" />

        <link href="/css/layout.css" rel="stylesheet" type="text/css" />
        <link href="/css/code-highlight.css" rel="stylesheet" type="text/css" />

        <link rel="alternate" type="application/rss+xml" title="Feed" href="/atom.xml" />

        <!-- Histats.com  START  --> 
<script async type="text/javascript" language="javascript"> 
var s_sid = 321314;var st_dominio = 4; 
var cimg = 0;var cwi =150;var che =30; 
</script> 
<script  async type="text/javascript" language="javascript" src="http://s11.histats.com/js9.js"/></script> 
<noscript><img src="http://s103.histats.com/stats/0.gif?321314&1" alt="contatore free" border="0"/> 
</noscript> 

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4316218-1']);
  _gaq.push(['_setDomainName', 'andreafrancia.it']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    </head>
    <body>
        <div id='mainnav' class='nav'>
    <ul>
        <li><a href="/">andreafrancia.it</a>
        <li><a href="/log.html">blog</a>
        <li class="last"><a href="/tdd-ios.html">TDD su iOS</a>
    </ul>
</div>

        <div id="contents">
            <h1>Tutorial Google Test</h1>
<div class='post'>
<div><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Google Test è un framework di test per C++. In questa miniguida spi</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">ego come </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">usarlo in Visual Studio</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> 2008</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">.</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> Per seguire la guida non avete bisogno di conoscere Visual Studio 2008, dovete però avere un idea di cosa sia un framework xUnit, e dovete conoscere C o C++.</font></span></p><h2 style="margin:12pt 0pt 3pt"><span style="font-family:Arial"><b><i><font size="4">Scaricare e installare Google Test</font></i></b></span></h2><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Scarichiamo dal sito ufficiale l&#39;ultima release, ad oggi il file </font></span><a href="http://googletest.googlecode.com/files/gtest-1.4.0.zip"><span style="color:#0000ff; font-family:&#39;Times New Roman&#39;"><u><font size="3">gtest-1.4.0.zip</font></u></span></a><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">e lo decompriamo</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">, per esempio</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> in c:\gtest-1.4.0.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Google Test </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">supporta diversi compilatori tra cui </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">fortunatamene </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Visual Studio</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> 2008. </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">I progetti di Visual</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> Studio si chiamano “Soluzioni”, d</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">entro la cartella </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">C:\gtest-1.4.0\msvc</font></span> <span style="font-family:&#39;Times New Roman&#39;"><font size="3">ci sono due soluzioni</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">:</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:Symbol"><font size="3">·</font></span>       <span style="font-family:&#39;Times New Roman&#39;"><b><font size="3">gtest.sln</font></b></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> (da usare se volete linkare staticamente la libreria gtest</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">,</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">come .LIB</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">)</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:Symbol"><font size="3">·</font></span>       <span style="font-family:&#39;Times New Roman&#39;"><b><font size="3">gtest-md.sln</font></b></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> (da usare se volete linkare dinamicamente la libreria</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">, come DLL</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">).</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Potete scegliere di usare sia uno che l’altro, io per </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">semplicità io scelgo di usare la libreria statica</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Prima di aprire la soluzione togliete </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">però l’eventuale </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">flag </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">“</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">read only</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">”</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> da tutti i file dentro msvc. </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Se non lo fate ve ne pentirete </font></span><span style="font-family:Wingdings"><font size="3">J</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">. Quando </font></span><span style="font-family:&#39;Times New Roman&#39;"><b><font size="3">gtest.sln</font></b></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> con Visual Studio</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> 2008 </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">vi chiederà di aggiornare la soluzione al nuovo formato, ditegli di sì con il solito Avanti, Avanti, Avanti. Se non avete tolto il readonly il Visual Studio si lamenterà.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Una volta apete provvede alla build di tutta la soluzione con F7 (Build &gt; Build Solution).</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Se tutto va bene dovrebbe crearvi i file </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">gtest_maind.lib</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> e </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">gtestd.lib</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> in </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">C:\gtest-1.4.0\msvc\gtest\Debug</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">.</font></span></p><h2 style="margin:12pt 0pt 3pt"><span style="font-family:Arial"><b><i><font size="4">Il primo progetto Visual Studio</font></i></b></span></h2><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Se siete pratici di Visual Studio saltate pure al prossimo paragrafo. Se come me non siete pratici seguitelo.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Creiamo</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> il primo progetto di test</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">,  da</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Visual Studio scegliamo:</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><i><font size="3">File &gt; New &gt; New Project </font></i></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">e </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">scegliamo </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">“</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Win32 Console Application</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">”.</font></span> <span style="font-family:&#39;Times New Roman&#39;"><font size="3">Diamo al progetto un nome qualsiasi, </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">io ho usato </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">&quot;LearningGoogleTest&quot;.</font></span> <span style="font-family:&#39;Times New Roman&#39;"><font size="3">Se il wizard ve lo chiede, sappiate che le </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">&quot;Precompiled Header&quot; non </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">vi </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">servono.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Il risultato dovrebbe essere simile a questo:</font></span></p><p style="margin:0pt 0pt 13.5pt"><img src="http://docs.google.com/File?id=dcwhf6k8_909gz4vcdt_b" width="249" height="217" alt="" style="border:none"></img></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">I </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">file stdafx.h, stdafx.cpp, targetver.h </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">sono </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">creati </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">gratuitamente </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">dal Visual Studio </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">e per i miei scopi non </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">valgono lo spazio che occupano</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">, quindi io li cancello.</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> </font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Dato che non sono pratico di Visual Studio prima </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">di procedere oltre </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">provo con un Hello World</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">:</font></span></p><p style="margin:0pt 0pt 0pt 36pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt 0pt 0pt 36pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt 0pt 0pt 36pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt 0pt 0pt 36pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span></p><p style="margin:0pt 0pt 0pt 36pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">int</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> main(</font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">int</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> argc, </font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">char</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> * argv[]) {</font></span></p><p style="margin:0pt 0pt 0pt 36pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">    printf(</font></span><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&quot;Hello world!\n&quot;</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">);</font></span></p><p style="margin:0pt 0pt 0pt 36pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">    </font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">return</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> 0;</font></span></p><p style="margin:0pt 0pt 0pt 36pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p><p style="margin:0pt 0pt 12pt"><br><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Con </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">CTRL+F5 (Debug &gt; Start Without Debugging) </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">possiamo ammirare la nostra creazione:</font></span></p><p style="margin:0pt 0pt 12pt; text-align:center"><img src="http://docs.google.com/File?id=dcwhf6k8_91g7b3v8hd_b" width="373" height="127" alt="" style="border:none"></img></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Notate quanto sia gentile Visual Studio</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> 2008</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> a chiedervi di schiaccciare un tast</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">o prima di chiudere la finestra, Visual Studio 6.0 non era così simpatico.</font></span></p><h2 style="margin:12pt 0pt 3pt"><span style="font-family:Arial"><b><i><font size="4">Aggiungiamo la libreria</font></i></b></span><span style="font-family:Arial"><b><i><font size="4"> Google Test </font></i></b></span><span style="font-family:Arial"><b><i><font size="4">al </font></i></b></span><span style="font-family:Arial"><b><i><font size="4">nostro progetto</font></i></b></span></h2><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Le librerie C/C++ sono una scocciatura perché per poterle usare devi sistemare due cose:</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:Symbol"><font size="3">·</font></span>       <span style="font-family:&#39;Times New Roman&#39;"><font size="3">i path dei file header (.h)</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:Symbol"><font size="3">·</font></span>       <span style="font-family:&#39;Times New Roman&#39;"><font size="3">i path dei file di libreria (.dll o .lib)</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Io preferisco affrontare questi problemi uno alla volta.</font></span></p><h2 style="margin:12pt 0pt 3pt"><span style="font-family:Arial"><b><i><font size="4">Sistemare i path degli headers</font></i></b></span></h2><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Includiamo</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> l&#39;header di gtest</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> in </font></span><span style="font-family:&#39;Times New Roman&#39;"><b><font size="3">“</font></b></span><span style="font-family:&#39;Times New Roman&#39;"><b><font size="3">LearningGoogleTest.cpp”</font></b></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">:</font></span></p><table cellspacing="0" cellpadding="0" style=" margin-left:0pt" class="zeroBorder"><tr><td style=" vertical-align:top; width:221.4pt"><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">int</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> main(</font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">int</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> argc, </font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">char</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> * argv[]) {</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">    printf(</font></span><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&quot;Hello world!\n&quot;</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">);</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">    </font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">return</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> 0;</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> </font></span></p></td><td style=" vertical-align:top; width:221.4pt"><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt"><span style="background-color:#ffff00; color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="background-color:#ffff00; color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;gtest/gtest.h&gt;</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">int</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> main(</font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">int</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> argc, </font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">char</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> * argv[]) {</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">    printf(</font></span><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&quot;Hello world!\n&quot;</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">);</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">    </font></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">return</font></span><span style="font-family:&#39;Courier New&#39;"><font size="2"> 0;</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p></td></tr></table><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> </font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Compiliamo (F7) </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">e notiamo</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> l’errore:</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">learninggoogletest.cpp(4) : warning C4627: &#39;#include &lt;gtest/gtest.h&gt;&#39;: skipped when looking for precompiled header use</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Risolviamo aggiungendo </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">in</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:&#39;Times New Roman&#39;"><i><font size="3">Project Settings &gt; Configuration Properties &gt; C/C++ &gt; Additional Include Directories</font></i></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">il path (completo) di </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">gtest-1.4.0\include</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Tentiamo di nuovo ed ora abbiamo un errore durante la fase di linking:</font></span><span style="color:#000000; font-family:&#39;Times New Roman&#39;"><font size="4">              </font></span><img src="http://docs.google.com/File?id=dcwhf6k8_92hnhkstrk_b" width="554" height="181" alt="" style="border:none"></img></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Risolviamo </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">aggiungendo </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">in </font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:&#39;Times New Roman&#39;"><i><font size="3">Project Settings &gt; Configuration Properties &gt; Linker &gt; Input &gt; Additional Dependencies </font></i></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">i </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">path di queste due librerie</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:Symbol"><font size="3">·</font></span>       <span style="font-family:&#39;Times New Roman&#39;"><font size="3">&quot;c:\gtest-1.4.0\msvc\gtest\Debug\gtest_maind.lib&quot;</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:Symbol"><font size="3">·</font></span>       <span style="font-family:&#39;Times New Roman&#39;"><font size="3">&quot;c:\gtest-1.4.0\msvc\gtest\Debug\gtestd.lib&quot;</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Mi raccomando di usare i doppi apici (&quot;) se ci sono spazi </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">nei path!</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">In teoria farlo ora dovrebbe funzionare </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">ma in pratica no! Se anche voi avete errori del genere:</font></span></p><p style="margin:0pt 0pt 12pt"><img src="http://docs.google.com/File?id=dcwhf6k8_93hrv59n4v_b" width="482" height="109" alt="" style="border:none"></img></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">allora vuol dire che lo switch </font></span><span style="font-family:&#39;Times New Roman&#39;"><b><font size="3">Runtime Library</font></b></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> usato per il progetto gtest.sln e quello del vostro progetto non coincidono.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Per risolvere andate in</font></span><span style="color:#000000; font-family:&#39;Times New Roman&#39;"><font size="4">:</font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="color:#000000; font-family:&#39;Times New Roman&#39;"><i><font size="4">Project Settings &gt; Configuration Properties &gt; C/C++ &gt; Code Generation &gt; Runtime Library</font></i></span><span style="color:#000000; font-family:&#39;Times New Roman&#39;"><i><font size="4"> </font></i></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">E assicuratevi che ci sia</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">:</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Multi-threaded Debug (/MTd)</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">A questo punto la build dovrebbe andare a buon fine.</font></span></p><h2 style="margin:12pt 0pt 3pt"><span style="font-family:Arial"><b><i><font size="4">Eseguire i test</font></i></b></span></h2><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">A questo punto dovremmo avere a disposizione tutto l’occorrente per scrivere, compilare ed eseguire i test.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Riprendiamo il file </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">LearningGoogleTest.cpp</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> e togliamo la funzione main()</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">.</font></span></p><table cellspacing="0" cellpadding="0" style=" margin-left:0pt" class="zeroBorder"><tr><td style=" vertical-align:top; width:221.4pt"><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;gtest/gtest.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">TEST(foo,bar) {</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">FAIL();</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><strike><font size="2">int</font></strike></span><span style="font-family:&#39;Courier New&#39;"><strike><font size="2"> main(</font></strike></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><strike><font size="2">int</font></strike></span><span style="font-family:&#39;Courier New&#39;"><strike><font size="2"> argc, </font></strike></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><strike><font size="2">char</font></strike></span><span style="font-family:&#39;Courier New&#39;"><strike><font size="2"> * argv[]) {</font></strike></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><strike><font size="2">    printf(</font></strike></span><span style="color:#a31515; font-family:&#39;Courier New&#39;"><strike><font size="2">&quot;Hello world!\n&quot;</font></strike></span><span style="font-family:&#39;Courier New&#39;"><strike><font size="2">);</font></strike></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><strike><font size="2">    </font></strike></span><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><strike><font size="2">return</font></strike></span><span style="font-family:&#39;Courier New&#39;"><strike><font size="2"> 0;</font></strike></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><strike><font size="2">}</font></strike></span></p></td><td style=" vertical-align:top; width:221.4pt"><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;gtest/gtest.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">TEST(foo,bar) {</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">FAIL();</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p></td></tr></table><p style="margin:0pt 0pt 12pt"><span style="color:#000000; font-family:&#39;Times New Roman&#39;"><font size="4"> </font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">In questo modo il linker andrà a prendere la </font></span><span style="font-family:&#39;Times New Roman&#39;"><b><font size="3">main()</font></b></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> da </font></span><span style="font-family:&#39;Times New Roman&#39;"><b><font size="3">gtest_maind.lib</font></b></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> la quale </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">fa </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">esattamente quello che ci serve:</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> e</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">s</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">egue </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">tutti i test.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Premendo CTRL+F5 il programma si avvia e vengono eseguiti tutti i test. Il risultato dovrebbe essere questo:</font></span></p><p style="margin:0pt 0pt 12pt"><img src="http://docs.google.com/File?id=dcwhf6k8_94fxgv46f2_b" width="525" height="271" alt="" style="border:none"></img></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Abbiamo </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">un solo test e questo non passa ... per forza 0 non è uguale a 1!</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Facciamo passare il test:</font></span></p><table cellspacing="0" cellpadding="0" style=" margin-left:0pt" class="zeroBorder"><tr><td style=" vertical-align:top; width:221.4pt"><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;gtest/gtest.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">TEST(foo,bar) {</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">ASSERT_EQ(</font></span><span style="background-color:#ffff00; font-family:&#39;Courier New&#39;"><b><font size="2">0</font></b></span><span style="font-family:&#39;Courier New&#39;"><font size="2">,1);</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p></td><td style=" vertical-align:top; width:221.4pt"><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;gtest/gtest.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">TEST(foo,bar) {</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">ASSERT_EQ(1,1);</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p></td></tr></table><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> </font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">E con CTRL+F5 otteniamo la prima barra verde</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">:</font></span></p><p style="margin:0pt 0pt 12pt"><img src="http://docs.google.com/File?id=dcwhf6k8_95fzrvndcz_b" width="477" height="211" alt="" style="border:none"></img></p><h1 style="margin:5pt 0pt"><span style="color:#000000; font-family:&#39;Times New Roman&#39;"><b><font size="5">Integrazione in Visual C++</font></b></span></h1><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">I messaggi di </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">FAIL </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">di gtest sono Visual Studio friendly.</font></span> <span style="font-family:&#39;Times New Roman&#39;"><font size="3">Ora vediamo come sfruttare quest</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">a feature</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="color:#000000; font-family:&#39;Times New Roman&#39;"><font size="4"> </font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Con il Post-Build Event diciamo Visual Studio di </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">avviare i test dopo ogni build.</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">P</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">er farlo </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">impostiamo </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">in</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> </font></span></p><p style="margin:0pt 0pt 12pt 36pt"><span style="font-family:&#39;Times New Roman&#39;"><i><font size="3">Project Settings &gt; Configuration Properties &gt; Build Events &gt; Post-Build Event &gt; Command Line</font></i></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">il valore:</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> </font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">&quot;$(TargetDir)\$(TargetName).exe&quot;</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Ora, se avviamo la build (F7) dovrebbe ritrovarci i risultati dei test nella finestra </font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">O</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3">utput.</font></span><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> Ma non è finita qui. Simuliamo un fallimento nel nostro test:</font></span></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3"> </font></span></p><table cellspacing="0" cellpadding="0" style=" margin-left:0pt" class="zeroBorder"><tr><td style=" vertical-align:top; width:221.4pt"><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;gtest/gtest.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">TEST(foo,bar) {</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">ASSERT_EQ(</font></span><span style="background-color:#ffff00; font-family:&#39;Courier New&#39;"><b><font size="2">1</font></b></span><span style="font-family:&#39;Courier New&#39;"><font size="2">,1);</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p></td><td style=" vertical-align:top; width:221.4pt"><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2">// LearningGoogleTest.cpp</font></span></p><p style="margin:0pt"><span style="color:#008000; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;stdio.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#0000ff; font-family:&#39;Courier New&#39;"><font size="2">#include</font></span> <span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2">&lt;gtest/gtest.h&gt;</font></span></p><p style="margin:0pt"><span style="color:#a31515; font-family:&#39;Courier New&#39;"><font size="2"> </font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">TEST(foo,bar) {</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">              </font></span><span style="font-family:&#39;Courier New&#39;"><font size="2">ASSERT_EQ(</font></span><span style="background-color:#ffff00; font-family:&#39;Courier New&#39;"><b><font size="2">0</font></b></span><span style="font-family:&#39;Courier New&#39;"><font size="2">,1);</font></span></p><p style="margin:0pt"><span style="font-family:&#39;Courier New&#39;"><font size="2">}</font></span></p></td></tr></table><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Avviamo la build (F7) e otteniamo qualcosa del tipo:</font></span></p><p style="margin:0pt 0pt 12pt"><img src="http://docs.google.com/File?id=dcwhf6k8_96qtvrxvfn_b" width="576" height="214" alt="" style="border:none"></img></p><p style="margin:0pt 0pt 12pt"><span style="font-family:&#39;Times New Roman&#39;"><font size="3">Cliccando sul messaggio di errore il Visual Studio ci porta alla linea che l’ha provocato.</font></span></p></div><br></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Andrea Francia</div>
<div class='content'>
@des4maisons: Thanks, the next time maybe I&#39;ll use directly English.</div>
</div>
<div class='comment'>
<div class='author'>des4maisons</div>
<div class='content'>
This was very helpful, even after being fed through google translator. Thank you!</div>
</div>
</div>

        </div>
        <!-- Histats.com  START  --> 
<script async type="text/javascript" language="javascript"> 
var s_sid = 321314;var st_dominio = 4; 
var cimg = 0;var cwi =150;var che =30; 
</script> 
<script  async type="text/javascript" language="javascript" src="http://s11.histats.com/js9.js"/></script> 
<noscript><img src="http://s103.histats.com/stats/0.gif?321314&1" alt="contatore free" border="0"/> 
</noscript> 

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4316218-1']);
  _gaq.push(['_setDomainName', 'andreafrancia.it']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    </body>
</html>
